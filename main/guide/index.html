
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../aries-vcx/">
      
      
        <link rel="next" href="TEST_DEV_GUIDE/">
      
      
      <link rel="icon" href="https://raw.githubusercontent.com/hyperledger/aries-rfcs/main/collateral/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.31">
    
    
      
        <title>OWL Agent Test Harness - OWL Agent Test Harness (OATH) Interop Information</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aries-agent-test-harness-smashing-complexity-in-interoperability-testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OWL Agent Test Harness (OATH) Interop Information" class="md-header__button md-logo" aria-label="OWL Agent Test Harness (OATH) Interop Information" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/hyperledger/aries-rfcs/main/collateral/Hyperledger_Aries_Logo_White.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OWL Agent Test Harness (OATH) Interop Information
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OWL Agent Test Harness
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/openwallet-foundation/owl-agent-test-harness" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openwallet-foundation/owl-agent-test-harness
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  Interoperability Information

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../acapy/" class="md-tabs__link">
          
  
  Latest Results by Agent

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  OATH Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="CONTRIBUTING/" class="md-tabs__link">
          
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OWL Agent Test Harness (OATH) Interop Information" class="md-nav__button md-logo" aria-label="OWL Agent Test Harness (OATH) Interop Information" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/hyperledger/aries-rfcs/main/collateral/Hyperledger_Aries_Logo_White.png" alt="logo">

    </a>
    OWL Agent Test Harness (OATH) Interop Information
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/openwallet-foundation/owl-agent-test-harness" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openwallet-foundation/owl-agent-test-harness
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interoperability Information
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Interoperability Information
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary of Latest Results
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aries-interop-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to Interoperability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TEST-COVERAGE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OWL Agent Test Harness Coverage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Latest Results by Agent
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Latest Results by Agent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../acapy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud Agent Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../credo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credo-TS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aries-vcx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aries VCX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    OATH Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            OATH Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OWL Agent Test Harness
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OWL Agent Test Harness
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    <span class="md-ellipsis">
      Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aries-agent-test-harness-terminology" class="md-nav__link">
    <span class="md-ellipsis">
      Aries Agent Test Harness Terminology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-script-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Test Script Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aries-agent-backchannels" class="md-nav__link">
    <span class="md-ellipsis">
      Aries Agent Backchannels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aries Agent Backchannels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implemented-backchannels" class="md-nav__link">
    <span class="md-ellipsis">
      Implemented Backchannels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-manage-bash-script" class="md-nav__link">
    <span class="md-ellipsis">
      The manage bash script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-aath-agents-as-services" class="md-nav__link">
    <span class="md-ellipsis">
      Using AATH Agents as Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using AATH Agents as Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-backchannel-specific-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Extra Backchannel-Specific Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-configurations-for-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configurations for Agents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Configurations for Agents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-configuration-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configuration Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Test Tags
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-tagged-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Running Tagged Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Test Coverage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      Test Reporting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-runsets" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Runsets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TEST_DEV_GUIDE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test Development Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="aries-backchannels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backchannels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="AATH_DEV_CONTAINERS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with Dev Containers in OATH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="RunningLocally/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running OATH Locally
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging Backchannels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="AATH_DEV_CONTAINERS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with Dev Containers in OATH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ACCESS-CONNECTION-IDS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Connection IDs in Tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CONNECTION-REUSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taking Advantage of Connection Reuse in OATH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CONFIGURE-CRED-TYPES/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Tests with Credential Types and Proofs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="REMOTE_AGENT_TESTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Agent Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MOBILE_AGENT_TESTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mobile Agent Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="RETRY-FAILED-SCENARIOS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Retry Failed Test Scenarios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="TEST_REPORTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OWL Agent Test Harness Advanced Test Reporting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MAINTAINERS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maintainers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="LICENSE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    <span class="md-ellipsis">
      Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aries-agent-test-harness-terminology" class="md-nav__link">
    <span class="md-ellipsis">
      Aries Agent Test Harness Terminology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-script-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Test Script Guidelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aries-agent-backchannels" class="md-nav__link">
    <span class="md-ellipsis">
      Aries Agent Backchannels
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aries Agent Backchannels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implemented-backchannels" class="md-nav__link">
    <span class="md-ellipsis">
      Implemented Backchannels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-manage-bash-script" class="md-nav__link">
    <span class="md-ellipsis">
      The manage bash script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-aath-agents-as-services" class="md-nav__link">
    <span class="md-ellipsis">
      Using AATH Agents as Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using AATH Agents as Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-backchannel-specific-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Extra Backchannel-Specific Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-configurations-for-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configurations for Agents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Configurations for Agents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-configuration-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Configuration Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Test Tags
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-tagged-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Running Tagged Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Test Coverage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      Test Reporting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-runsets" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Runsets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="aries-agent-test-harness-smashing-complexity-in-interoperability-testing">Aries Agent Test Harness: Smashing Complexity in Interoperability Testing<!-- omit in toc --><a class="headerlink" href="#aries-agent-test-harness-smashing-complexity-in-interoperability-testing" title="Permanent link">&para;</a></h1>
<p><a href="LICENSE/"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" /></a></p>
<p>The Aries Agent Test Harness (AATH) is a <a href="https://en.wikipedia.org/wiki/Behavior-driven_development">BDD</a>-based test execution engine and set of tests for evaluating the interoperability of Aries Agents and Agent Frameworks. The tests are agnostic to the components under test but rather are designed based on the <a href="https://hyperledger.github.io/aries-rfcs/latest/">Aries RFCs</a> and the interaction protocols documented there. The AATH enables the creation of an interop lab much like the <a href="https://www.iol.unh.edu/">labs</a> used by the telcos when introducing new hardware into the markets&mdash;routers, switchers and the like. Aries agent and agent framework builders can easily incorporate these tests into the their CI/CD pipelines to ensure that interoperability is core to the development process.</p>
<p>Want to see the Aries Agent Test Harness in action? Give it a try using a git, docker and bash enabled system. Once you are in a bash shell, run the following commands to execute a set of RFC tests using the <a href="https://github.com/hyperledger/aries-cloudagent-python">Aries Cloud Agent - Python</a>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/hyperledger/aries-agent-test-harness
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>aries-agent-test-harness
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>./manage<span class="w"> </span>build<span class="w"> </span>-a<span class="w"> </span>acapy<span class="w"> </span>-a<span class="w"> </span>javascript
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy<span class="w"> </span>-b<span class="w"> </span>javascript<span class="w"> </span>-t<span class="w"> </span>@AcceptanceTest<span class="w"> </span>-t<span class="w"> </span>~@wip
</code></pre></div>
<p>The commands take a while to run (you know...building modern apps always means downloading half the internet...), so while you wait, here's what's happening:</p>
<ul>
<li>The AATH <code>./manage build</code> command builds Test Agent docker images for the Aries Cloud Agent Python (ACA-Py) and Aries Framework JavaScript (AFJ) agent frameworks and the test harness.</li>
<li>The AATH <code>./manage run</code> command executes a set of tests (those tagged "AcceptanceTest" but not tagged "<a class="magiclink magiclink-github magiclink-mention" href="https://github.com/wip" title="GitHub User: wip">@wip</a>") with the ACA-Py test agent playing most of the roles&mdash;Acme, Faber and Mallory, while the AFJ test agent plays the role of Bob.</li>
</ul>
<p>It's that last part makes the AATH powerful. On every run, different AATH-enabled components can be assigned any role (Acme, Bob, Faber, Mallory). For some initial pain (AATH-enabling a component), interoperability testing becomes routine, and we can make hit our goal: to make interoperability boring.</p>
<p>Interesting to you? Read on for more about the architecture, how to build tests, how to AATH-enable the Aries agents and agent frameworks that you are building and how you can run these tests on a continuous basis. For a brief set of slides covering the process and goals, check <a href="https://docs.google.com/presentation/d/1tNttxlHE8iwyOr7LDOZ6VrCwh8AuINfzuI2Gl0WEld0/edit?usp=sharing">this</a> out.</p>
<p>We'd love to have help in building out a full Aries interoperability lab.</p>
<h2 id="contents">Contents<!-- omit in toc --><a class="headerlink" href="#contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#aries-agent-test-harness-terminology">Aries Agent Test Harness Terminology</a></li>
<li><a href="#test-script-guidelines">Test Script Guidelines</a></li>
<li><a href="#aries-agent-backchannels">Aries Agent Backchannels</a></li>
<li><a href="#implemented-backchannels">Implemented Backchannels</a></li>
<li><a href="#the-manage-bash-script">The <code>manage</code> bash script</a></li>
<li><a href="#using-aath-agents-as-services">Using AATH Agents as Services</a></li>
<li><a href="#use-cases">Use Cases</a><ul>
<li><a href="#debugging-within-aath">Debugging within AATH</a></li>
<li><a href="#accessing-backchannels-via-swagger">Accessing Backchannels via Swagger</a></li>
<li><a href="#aries-mobile-test-harness">Aries Mobile Test Harness</a></li>
</ul>
</li>
<li><a href="#extra-backchannel-specific-parameters">Extra Backchannel-Specific Parameters</a></li>
<li><a href="#custom-configurations-for-agents">Custom Configurations for Agents</a></li>
<li><a href="#custom-configuration-use-cases">Custom Configuration Use Cases</a><ul>
<li><a href="#usage-in-aries-mobile-test-harness">Usage in Aries Mobile Test Harness</a></li>
</ul>
</li>
<li><a href="#test-tags">Test Tags</a></li>
<li><a href="#running-tagged-tests">Running Tagged Tests</a><ul>
<li><a href="#using-and-or-in-test-execution-tags">Using AND, OR in Test Execution Tags</a></li>
</ul>
</li>
<li><a href="#test-coverage">Test Coverage</a></li>
<li><a href="#test-reporting">Test Reporting</a></li>
<li><a href="#adding-runsets">Adding Runsets</a></li>
</ul>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<p>The following diagram provides an overview of the architecture of the AATH.</p>
<p><img alt="Aries Agent Test Harness Architecture" src="../assets/aath-arch/aath-arch.png" /></p>
<ul>
<li>All of the executable elements run in "Test Agent" docker containers.</li>
<li>The components-under-test (e.g. Acme, Bob and Mallory) are externally identical, enabling the selection of the components to be tested a runtime decision.</li>
<li>An identical HTTP interface exists between the test harness and each test docker container.</li>
<li>A "backchannel" within each test container handles the commands from the test harness, converting them into actions understood by the agent or agent framework.<ul>
<li>This is the hard part&mdash;creating a backchannel for each agents/agent frameworks</li>
</ul>
</li>
<li>The general roles of the test participants are:</li>
<li>Acme: an enterprise issuer/verifier</li>
<li>Bob: a holder/prover</li>
<li>Faber: another enterprise issuer/verifier</li>
<li>Mallory: a malicious holder/prover</li>
<li>Other roles could be added, perhaps Carol (another holder/prover) and Device (an IOT device).</li>
<li>The test harness is the Python <a href="https://behave.readthedocs.io/en/latest/">behave</a> engine, with the "features" (as they are called in BDD-speak) written in <a href="https://behave.readthedocs.io/en/latest/gherkin.html#gherkin-feature-testing-language">Gherkin</a> and the feature steps in Python.</li>
<li>Dockerfiles are used to package the backchannel and the component under test (an agent or agent framework) into a single container image with a pre-defined set of port mappings.</li>
<li>One of the ports is for the test-harness-to-backchannel interface, while the rest can be used as needed by the component under test and it's backchannel.</li>
<li>At test execution time, command line parameters enable the selection of any of the docker images to be used to play any of the test case roles. Further, a flexible test case tagging mechanism enables command line (or configuration file) selection of the tests cases to be run.</li>
<li>Since the components being tested will have different capabilities (e.g., issuer, prover, verifier), they may only be selected to play certain roles. For example, a mobile wallet app might only play the roles of Bob and Mallory, and never be selected to play the role of Acme.</li>
<li>Likewise, only some tests will be selected for execution based on the interoperable capabilities of the components being tested, for example, a component might only support AIP 2.0.</li>
<li>A bash script (<code>./manage</code>) processes the command line options and orchestrates the docker image building and test case running.</li>
<li>The <code>./manage</code> script also supports running the services needed by the tests, such as a <a href="https://github.com/bcgov/von-network">von-network</a> Indy instance, an <a href="https://github.com/bcgov/indy-tails-server">Indy tails service</a>, a universal resolver and a <code>did:orb</code> instance.</li>
<li>Environment variables can also be used to configure a test run to use public services, such as the BCovrin test Indy instance. You'll find examples of using environment variables to use those services in various documentation files in this repo.</li>
<li>A special Test Agent called <code>mobile</code> can be used in the <code>Bob</code> role to test mobile wallet apps on phones. See <a href="MOBILE_AGENT_TESTING/">this document</a> for details.</li>
<li>OATH has the ability to include remote agents in other/external environments into an interop test run. 
This allows the verification of agents unmanaged by the test harness with other agents. See <a href="REMOTE_AGENT_TESTING/">this document</a> for more details on the <code>remote</code> option. </li>
</ul>
<h2 id="aries-agent-test-harness-terminology">Aries Agent Test Harness Terminology<a class="headerlink" href="#aries-agent-test-harness-terminology" title="Permanent link">&para;</a></h2>
<p>There are a couple of layers of abstraction involved in the test harness architecture, and it's worth formalizing some terminology to make it easier to communicate about what's what when we are are running tests.</p>
<ul>
<li><strong>Test Harness</strong>: An engine that executes the selected tests and collects the results.</li>
<li><strong>Backchannel</strong>: A piece of integration software that receives HTTP requests from the Test Harness and interacts with the agent or agent framework under test to execute the requests. A backchannel is needed for each agent or agent framework. The same backchannel will likely work for multiple agent and agent framework versions and/or configurations.</li>
<li><strong>Components under Test (CUTs)</strong>: external Aries agents or agent frameworks being tested.</li>
<li>The CUT might be an agent framework like aries-framework-dotnet or aries-cloudagent-python. In those cases, the backchannel is a controller that directly operates an instance of the agent framework.</li>
<li>The CUT might be a full agent; a combination of an agent framework instance and a controller. In those cases, the backchannel must be able to operate the controller, which in turn controls the agent framework. For example, a mobile agent has a user interface (a controller), perhaps with some automation rules. Its' AATH backchannel will interact with the controller, not the agent framework directly.</li>
<li>There may be multiple CUTs that operate with a single backchannel. For example, different configurations of an agent framework or different versions.</li>
<li><strong>Test Agent (TA)</strong>: The combined instance of a CUT and a backchannel, instantiated as a single docker image.</li>
</ul>
<h2 id="test-script-guidelines">Test Script Guidelines<a class="headerlink" href="#test-script-guidelines" title="Permanent link">&para;</a></h2>
<p>AATH test scripts are written in the <a href="https://behave.readthedocs.io/en/latest/gherkin.html#gherkin-feature-testing-language">Gherkin</a> language, using the python <a href="https://behave.readthedocs.io/en/latest/">behave</a> framework. Guidelines for writing test scripts are located <a href="TEST_DEV_GUIDE/">here</a>.</p>
<h2 id="aries-agent-backchannels">Aries Agent Backchannels<a class="headerlink" href="#aries-agent-backchannels" title="Permanent link">&para;</a></h2>
<p>Backchannels are the challenging part of the AATH. In order to participate in the interoperability testing, each CUT builder must create and maintain a backchannel that converts requests from the test harness into commands for the component under test. In some cases, that's relatively easy, such as with <a href="https://github.com/hyperledger/aries-cloudagent-python">Aries Cloud Agent - Python</a>. An ACA-Py controller uses an HTTP interface to control an ACA-Py instance, so the ACA-Py backchannel is "just another" ACA-Py controller. In other cases, it may be more difficult, calling for the component under test to be embedded into a web service.</p>
<p>We have created a proof-of-concept Test Agent to support manual testing with mobile agents, described <a href="MOBILE_AGENT_TESTING/">here</a>.</p>
<p>A further complication is that as tests are added to the test suite, the backchannel interface expands, requiring that backchannel maintainers extend their implementation to be able to run the new tests. Note that the test engine doesn't stop if the backchannel steps are not implemented, however, such tests will be marked as <code>fail</code>ing on test runs, usually with an HTTP <code>404</code> error.</p>
<h3 id="implemented-backchannels">Implemented Backchannels<a class="headerlink" href="#implemented-backchannels" title="Permanent link">&para;</a></h3>
<p>Backchannels can be found in the <a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels"><code>aries-backchannels</code></a> folder of this repo. For more information on building a backchannel, see the documentation in the <a href="aries-backchannels/"><code>aries-backchannels</code> README</a>, and look at the code of the existing backchannels. To get help in building a backchannel for a component you want tested, please use GitHub issues and/or ask questions on the <a href="https://discord.gg/hyperledger">Hyperledger Discord</a> <code>#aries-agent-test-harness</code> channel.</p>
<p>A number of backchannels have been implemented, with the a subset being regularly run for testing <a href="https://github.com/hyperledger/aries-cloudagent-python">ACA-PY</a>, <a href="https://github.com/hyperledger/aries-vcx">Aries VCX</a> and <a href="https://github.com/openwallet-foundation/credo-ts">Credo-TS</a> Aries agent frameworks. The ACA-Py is built on a common Python base (<a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/python/aries_backchannel.py">https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/python/aries_backchannel.py</a>) that sets up the backchannel API listener and performs some basic request validation and dispatching. On the other hand Aries VCX is build on their preferred language (Rust). The ACA-PY (<a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/acapy/acapy_backchannel.py">https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/acapy/acapy_backchannel.py</a>) and AriesVCX (<a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/aries-vcx">https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/aries-vcx</a>) implementations are good example to extend the base to add support for their respective agent frameworks.</p>
<p>There is also a backchannel to support (manual) testing with <a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backcgannels/mobile">mobile</a> agents. This backchannel doesn't control the mobile agent directly, rather it will prompt the tester to manually accept connection requests, credential offers etc. Use of the mobile backchannel is described <a href="MOBILE_AGENT_TESTING/">here</a>.</p>
<h2 id="the-manage-bash-script">The <code>manage</code> bash script<a class="headerlink" href="#the-manage-bash-script" title="Permanent link">&para;</a></h2>
<p>The AATH <code>./manage</code> script in the repo root folder is used to manage running builds of TA images and initiate test runs. Running the script with no arguments or just <code>help</code> to see the script's usage information. The following summarizes the key concepts.</p>
<p><code>./manage</code> is a bash script, so you must be in a bash compatible shell to run the AATH. You must also have an operational docker installation and git installed. Pretty normal stuff for Aries Agent development. As well, the current AATH requires access to a running Indy network. A locally running instance of <a href="https://github.com/bcgov/von-network">VON-Network</a> is one option, but you can also pass in environment variables for the LEDGER_URL, GENESIS_URL or GENESIS_FILE to use a remote network. For example <code>LEDGER_URL_CONFIG=http://test.bcovrin.vonx.io</code></p>
<p>Before running tests, you must build the TA and harness docker images. Use <code>./manage build -a &lt;TA&gt;</code> to build the docker images for a TA, and the test harness itself. You may specify multiple <code>-a</code> parameters to build multiple TAs at the same time. Leaving off the <code>-a</code> option builds docker images for all of the TAs found in the repo. It takes a long time to run...</p>
<p>There are two options for testing <a href="https://github.com/hyperledger/aries-cloudagent-python">ACA-PY</a> - you can build and run <code>acapy</code>, which builds the backchannel based on the latest released code, or you can build and run <code>acapy-main</code>, which builds the backchannel based on the latest version of the <code>main</code> branch. (Note that to build the backchannel based on a different repo/branch, edit <a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/aries-backchannels/acapy/requirements-main.txt">this file</a> to specify the repo/branch you want to test, and then build/run <code>acapy-main</code>.)</p>
<p>To run the tests, use the <code>./manage run...</code> sub-command. the <code>run</code> command requires defining what TAs will be used for Acme (<code>-a &lt;TA&gt;</code>), Bob (<code>-b &lt;TA&gt;</code>) and Mallory (<code>-m &lt;TA&gt;</code>). To default all the agents to use a single component, use <code>-d &lt;TA&gt;</code>. Parameters are processed in order, so you can use <code>-d</code> to default the agents to one, and then use <code>-b</code> to use a different TA for Bob.</p>
<p>There are two ways to control the behave test engine's selection of test cases to run. First, you can specify one or more <code>-t &lt;tag&gt;</code> options to select the tests associated with specific tags. See the guidance on using tags with behave <a href="https://behave.readthedocs.io/en/stable/behave.html#tag-expression">here</a>. Note that each <code>-t</code> option is passed to behave as a <code>--tags &lt;tag&gt;</code> parameter, enabling control of the ANDs and ORs handling of tags. Specifically, each separate <code>-t</code> option is ANDed with the rest of the <code>-t</code> options. To OR tags, use a single <code>-t</code> option with commas (<code>,</code>) between the tags. For example, specify the options <code>-t @t1,@t2 -t @f1</code> means to use "tests tagged with <code>(t1 or t2) AND f1</code>." To get a full list of possible tags to use in this run command, use the <code>./manage tags</code> command.</p>
<blockquote>
<p>Note that the <code>&lt;tag&gt;</code> arguments passed in on the command line <strong>cannot</strong> have a space, even if you double-quote the tag or escape the space. This is because the args are going through multiple layers shells (the script, calling docker, calling a script in the docker instance that in turn calls behave...). In all that argument passing, the wrappers around the args get lost. That should be OK in most cases, but if it is a problem, we have the <code>-i</code> option as follows...</p>
</blockquote>
<p>To enable full control over behave's behavior (if you will...), the <code>-i &lt;ini file&gt;</code> option can be used to pass a behave "ini" format file into the test harness container. The ini file enables full control over the behave engine, add handles the shortcoming of not being able to pass tags arguments with spaces in them. See the behave configuration file options <a href="https://behave.readthedocs.io/en/stable/behave.html#configuration-files">here</a>. Note that the file name can be whatever you want. When it lands in the test harness container, it will be called <code>behave.ini</code>. There is a default ini file located in <code>aries-agent-test-harness/aries-test-harness/behave.ini</code>. This ini file is picked up and used by the test harness without the -i option. To run the tests with a custom behave ini file, follow this example,</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy<span class="w"> </span>-t<span class="w"> </span>@AcceptanceTest<span class="w"> </span>-t<span class="w"> </span>~@wip<span class="w"> </span>-i<span class="w"> </span>aries-test-harness/MyNewBehaveConfig.ini
</code></pre></div>
<p>For a full inventory of tests available to run, use the <code>./manage tests</code>. Note that tests in the list tagged <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/wip" title="GitHub User: wip">@wip</a> are works in progress and should generally not be run.</p>
<h2 id="using-aath-agents-as-services">Using AATH Agents as Services<a class="headerlink" href="#using-aath-agents-as-services" title="Permanent link">&para;</a></h2>
<p>You may have the need to utilize the agents and their controller/backchannels separately from running interop tests with them. This can be for debugging AATH test code, or for something outside of AATH, like Aries Mobile Test Harness (AMTH) tests. To assist in this requirement the manage script can start 1-n agents of any aries framework that exists in AATH. This is done as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>./manage<span class="w"> </span>start<span class="w"> </span>-a<span class="w"> </span>acapy-main
</code></pre></div>
<p>The command above will only start Acme as ACA-py. No other agents (Bob, Faber, etc.) will be started. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nv">NGROK_AUTHTOKEN</span><span class="o">=</span>2ZrwpFakeAuthToken_W4VDBxavAzdB5K3wsDGz<span class="w"> </span><span class="nv">LEDGER_URL_CONFIG</span><span class="o">=</span>http://test.bcovrin.vonx.io<span class="w"> </span><span class="nv">TAILS_SERVER_URL_CONFIG</span><span class="o">=</span>https://tails.vonx.io<span class="w"> </span><span class="nv">AGENT_CONFIG_FILE</span><span class="o">=</span>/aries-backchannels/acapy/auto_issuer_config.yaml<span class="w"> </span>./manage<span class="w"> </span>start<span class="w"> </span>-a<span class="w"> </span>afgo-interop<span class="w"> </span>-b<span class="w"> </span>acapy-main<span class="w"> </span>-n
</code></pre></div>
<p>The second command above, will start Acme as AFGO, and Bob as ACA-py, utilizing an external Ledger and Tails Server, with a custom configuration to start ACA-py with. It will also start ngrok which is usually needed for mobile testing in AMTH. </p>
<p>To stop any agents started in this manner just run <code>./manage stop</code>.</p>
<h3 id="use-cases">Use Cases<a class="headerlink" href="#use-cases" title="Permanent link">&para;</a></h3>
<h4 id="debugging-within-aath">Debugging within AATH<a class="headerlink" href="#debugging-within-aath" title="Permanent link">&para;</a></h4>
<p>When running test code in a debugger, you may not always want or need all the agents running when doing your debugging. Your test may only utilize Acme and Bob, and have no need for Faber and Mallory. This feature will allow you to start only the agents needed in your test you are debugging. The following example will run ACA-py as Acme and Bob with no other agents running.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>./manage<span class="w"> </span>start<span class="w"> </span>-a<span class="w"> </span>acapy-main<span class="w"> </span>-b<span class="w"> </span>acapy-main
</code></pre></div>
<h4 id="accessing-backchannels-via-swagger">Accessing Backchannels via Swagger<a class="headerlink" href="#accessing-backchannels-via-swagger" title="Permanent link">&para;</a></h4>
<p>You can run a Swagger UI to expose your backchannel's API, for manual testing or maybe just to take a look at the API to understand it better.</p>
<p>If you start up all the agents:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>./manage<span class="w"> </span>start<span class="w"> </span>-d<span class="w"> </span>acapy-main
</code></pre></div>
<p>... then you can start up a Swagger UI as follows (run this from the same directory):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>swaggerapi/swagger-ui
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8081</span>:8080<span class="w"> </span>-e<span class="w"> </span><span class="nv">SWAGGER_JSON</span><span class="o">=</span>/mnt/openapi-spec.yml<span class="w"> </span>-v<span class="w"> </span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/docs/assets:/mnt<span class="w"> </span>swaggerapi/swagger-ui
</code></pre></div>
<p>Now open your browser with <code>http://localhost:8081</code> - you can pick which of the 4 agents you want to connect to.</p>
<h4 id="aries-mobile-test-harness">Aries Mobile Test Harness<a class="headerlink" href="#aries-mobile-test-harness" title="Permanent link">&para;</a></h4>
<p>Aries Mobile Test Harness (AMTH) is a testing stack used to test mobile Aries wallets. To do this end to end, mobile tests need issuers, verifiers, and maybe mediators. Instead of AMTH managing a set of controllers and agents, AMTH can point to an Issuer or Verifier controller/agent URL. AMTH can take advantage of the work done across aries frameworks and backchannels to assign AATH agents as issuers or verifiers in testing aries wallets. For example, the BC Wallet tests in AMTH are utilizing ACA-py agents in AATH as an issuer and verifier. This is done by executing the following.</p>
<p>From within aries-agent-test-harness</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>./manage<span class="w"> </span>start<span class="w"> </span>-a<span class="w"> </span>acapy-main<span class="w"> </span>-b<span class="w"> </span>acapy-main
</code></pre></div>
<p>From within aries-mobile-test-harness</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">LEDGER_URL_CONFIG</span><span class="o">=</span>http://test.bcovrin.vonx.io<span class="w"> </span><span class="nv">REGION</span><span class="o">=</span>us-west-1<span class="w"> </span>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>SauceLabs<span class="w"> </span>-u<span class="w"> </span>&lt;device-cloud-username&gt;<span class="w"> </span>-k<span class="w"> </span>&lt;device-cloud-access-key&gt;<span class="w"> </span>-p<span class="w"> </span>iOS<span class="w"> </span>-a<span class="w"> </span>AriesBifold-114.ipa<span class="w"> </span>-i<span class="w"> </span>http://0.0.0.0:9020<span class="w"> </span>-v<span class="w"> </span>http://0.0.0.0:9030<span class="w"> </span>-t<span class="w"> </span>@bc_wallet<span class="w"> </span>-t<span class="w"> </span>@T001-Connect
</code></pre></div>
<p>The URLs for issuer and verifier are pointers to the backchannel controllers for Acme and Bob in AATH, so that these test take advantage of the work done there. </p>
<h2 id="extra-backchannel-specific-parameters">Extra Backchannel-Specific Parameters<a class="headerlink" href="#extra-backchannel-specific-parameters" title="Permanent link">&para;</a></h2>
<p>You can pass backchannel-specific parameters as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nv">BACKCHANNEL_EXTRA_acapy_main</span><span class="o">=</span><span class="s2">&quot;{\&quot;wallet-type\&quot;:\&quot;indy\&quot;}&quot;</span><span class="w"> </span>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy-main<span class="w"> </span>-t<span class="w"> </span>@AcceptanceTest<span class="w"> </span>-t<span class="w"> </span>~@wip
</code></pre></div>
<p>The environment variable name is of the format <code>-&lt;agent_name&gt;</code>, where <code>&lt;agent_name&gt;</code> is the name of the agent (e.g. <code>acapy-main</code>) with hyphens replaced with underscores (i.e. <code>acapy_main</code>).</p>
<p>The contents of the environment variable are backchannel-specific. For aca-py it is a JSON structure containing parameters to use for agent startup.</p>
<p>The above example runs all the tests using the <code>indy</code> wallet type (vs <code>askar</code>, which is the default).</p>
<h2 id="custom-configurations-for-agents">Custom Configurations for Agents<a class="headerlink" href="#custom-configurations-for-agents" title="Permanent link">&para;</a></h2>
<p>Alternatively to the Extra Backchannel-Specific Parameters above, you can also pass a configuration file through to your agent when it starts (only works if your agent is started by your backchannel). The AATH tests have a predefined set of options needed for the test flow to function properly so, adding this configuration to AATH test execution may have side effects causing the interop tests to fail. However, this is helpful when using the agents as services outside of AATH tests like with Mobile Wallet tests in Aries Mobile Test Harness, where the agents usually will benefit from having auto options turned on. You can pass through your config file using the environment variable AGENT_CONFIG_FILE as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nv">NGROK_AUTHTOKEN</span><span class="o">=</span>2ZrwpFakeAuthToken_W4VDBxavAzdB5K3wsDGz<span class="w"> </span><span class="nv">LEDGER_URL_CONFIG</span><span class="o">=</span>http://test.bcovrin.vonx.io<span class="w"> </span><span class="nv">TAILS_SERVER_URL_CONFIG</span><span class="o">=</span>https://tails.vonx.io<span class="w"> </span><span class="nv">AGENT_CONFIG_FILE</span><span class="o">=</span>/aries-backchannels/acapy/auto_issuer_config.yaml<span class="w"> </span>./manage<span class="w"> </span>start<span class="w"> </span>-b<span class="w"> </span>acapy-main<span class="w"> </span>-n
</code></pre></div>
<p>The config file should live in the <code>aries-backchannels/&lt;agent&gt;</code> folder so it gets copied into the agent container automatically. Currently only the acapy backchannel supports this custom configuration in this manner. </p>
<h3 id="custom-configuration-use-cases">Custom Configuration Use Cases<a class="headerlink" href="#custom-configuration-use-cases" title="Permanent link">&para;</a></h3>
<h4 id="usage-in-aries-mobile-test-harness">Usage in Aries Mobile Test Harness<a class="headerlink" href="#usage-in-aries-mobile-test-harness" title="Permanent link">&para;</a></h4>
<p>When using AATH agents as a service for AMTH, these agent services will need to be started with differet or extra parameters on the agents than AATH starts them with by default. Mobile test issuers and verifiers may need the auto parameters turned on, like <code>--auto-accept-requests</code>, <code>--auto-respond-credential-proposal</code>, etc. The only way to do this when using the AATH agents is through using this configuration file handling. There is an existing file in <code>aries-backchannels/acapy</code> called auto_isser_config.yaml that is there to support this requirement for the BC wallet. This works in BC Wallet as follows;</p>
<p>From within aries-agent-test-harness</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nv">NGROK_AUTHTOKEN</span><span class="o">=</span>2ZrwpFakeAuthToken_W4VDBxavAzdB5K3wsDGz<span class="w"> </span><span class="nv">LEDGER_URL_CONFIG</span><span class="o">=</span>http://test.bcovrin.vonx.io<span class="w"> </span><span class="nv">TAILS_SERVER_URL_CONFIG</span><span class="o">=</span>https://tails.vonx.io<span class="w"> </span><span class="nv">AGENT_CONFIG_FILE</span><span class="o">=</span>/aries-backchannels/acapy/auto_issuer_config.yaml<span class="w"> </span>./manage<span class="w"> </span>start<span class="w"> </span>-a<span class="w"> </span>acapy-main<span class="w"> </span>-b<span class="w"> </span>acapy-main<span class="w"> </span>-n
</code></pre></div>
<p>From within aries-mobile-test-harness</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nv">LEDGER_URL_CONFIG</span><span class="o">=</span>http://test.bcovrin.vonx.io<span class="w"> </span><span class="nv">REGION</span><span class="o">=</span>us-west-1<span class="w"> </span>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>SauceLabs<span class="w"> </span>-u<span class="w"> </span>&lt;device-cloud-username&gt;<span class="w"> </span>-k<span class="w"> </span>&lt;device-cloud-access-key&gt;<span class="w"> </span>-p<span class="w"> </span>iOS<span class="w"> </span>-a<span class="w"> </span>AriesBifold-114.ipa<span class="w"> </span>-i<span class="w"> </span>http://0.0.0.0:9020<span class="w"> </span>-v<span class="w"> </span>http://0.0.0.0:9030<span class="w"> </span>-t<span class="w"> </span>@bc_wallet<span class="w"> </span>-t<span class="w"> </span>@T001-Connect
</code></pre></div>
<h2 id="test-tags">Test Tags<a class="headerlink" href="#test-tags" title="Permanent link">&para;</a></h2>
<p>The test harness has utilized tags in the BDD feature files to be able to narrow down a test set to be executed at runtime. The general AATH tags currently utilized are as follows:</p>
<ul>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/AcceptanceTest" title="GitHub User: AcceptanceTest">@AcceptanceTest</a> - Tests based on requirements specifically stated in the RFC.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/DerivedFunctionalTest" title="GitHub User: DerivedFunctionalTest">@DerivedFunctionalTest</a> - Tests derived on requirements but not specifically stated in the RFC.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/P1" title="GitHub User: P1">@P1</a>, <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/P2" title="GitHub User: P2">@P2</a>, <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/P3" title="GitHub User: P3">@P3</a>, <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/P4" title="GitHub User: P4">@P4</a> - Test Priority.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/NegativeTest" title="GitHub User: NegativeTest">@NegativeTest</a> - Test that attempts to break the software. ie. change workflow order, use invalid data, etc.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/ExceptionTest" title="GitHub User: ExceptionTest">@ExceptionTest</a> - Tests that are based on requirements that suggest exception cases.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/SmokeTest" title="GitHub User: SmokeTest">@SmokeTest</a> - Tests that can be used as a builds smoke or sanity tests.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/NeedsReview" title="GitHub User: NeedsReview">@NeedsReview</a> - Tests that have not been reviewed or approved.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/ReviewedApproved" title="GitHub User: ReviewedApproved">@ReviewedApproved</a> - Tests that have been reviewed and approved.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/wip" title="GitHub User: wip">@wip</a> - Tests that are a work in progress and incomplete.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/Done" title="GitHub User: Done">@Done</a> - Finished tests that are expected to Pass if executed against a Test Agent.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/AIP10" title="GitHub User: AIP10">@AIP10</a>, <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/AIP20" title="GitHub User: AIP20">@AIP20</a> - The Aries Interop Profile version for which the tests are written.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/MobileTest" title="GitHub User: MobileTest">@MobileTest</a> - The test (likely) works when using the "mobile" Test Agent.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/T01-AIP10-RFC0160" title="GitHub User: T01-AIP10-RFC0160">@T01-AIP10-RFC0160</a> - Unique Test Identifiers.</li>
</ul>
<p>Proposed Connection Protocol Tags</p>
<ul>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/MultiUseInvite" title="GitHub User: MultiUseInvite">@MultiUseInvite</a> - Test utilizes a multi-use invite. Not using this tag and the test expects the invite to be single use.</li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/SingleTryOnException" title="GitHub User: SingleTryOnException">@SingleTryOnException</a></li>
<li><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/RetryableOnException" title="GitHub User: RetryableOnException">@RetryableOnException</a></li>
</ul>
<p>To get a list of all the tags in the current test suite, run the command: <code>./manage tags</code></p>
<p>To get a list of the tests (scenarios) and the associated tags, run the command: <code>./manage tests</code></p>
<h3 id="running-tagged-tests">Running Tagged Tests<a class="headerlink" href="#running-tagged-tests" title="Permanent link">&para;</a></h3>
<p>Using tags, one can just run Acceptance Tests...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy<span class="w"> </span>-t<span class="w"> </span>@AcceptanceTest
</code></pre></div>
<p>or all Priority 1 Acceptance Tests, but not the ones flagged Work In Progress...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy<span class="w"> </span>-t<span class="w"> </span>@P1<span class="w"> </span>-t<span class="w"> </span>@AcceptanceTest<span class="w"> </span>-t<span class="w"> </span>~@wip
</code></pre></div>
<p>or derived functional tests</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy<span class="w"> </span>-t<span class="w"> </span>@DerivedFunctionalTest
</code></pre></div>
<p>or all the ExceptionTests...</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-t<span class="w"> </span>@ExceptionTest
</code></pre></div>
<h4 id="using-and-or-in-test-execution-tags">Using AND, OR in Test Execution Tags<a class="headerlink" href="#using-and-or-in-test-execution-tags" title="Permanent link">&para;</a></h4>
<p>Stringing tags together in one <code>-t</code> with commas as separators is equivalent to an <code>OR</code>. The separate <code>-t</code> options is equivalent to an <code>AND</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>./manage<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>acapy-main<span class="w"> </span>-t<span class="w"> </span>@RFC0453,@RFC0454<span class="w"> </span>-t<span class="w"> </span>~@wip<span class="w"> </span>-t<span class="w"> </span>~@CredFormat_JSON-LD
</code></pre></div>
<p>So the command above will run tests from RFC0453 or RFC0454, without the wip tag, and without the CredFormat_JSON-LD tag.</p>
<p>To read more on how one can control the execution of test sets based on tags see the <a href="https://behave.readthedocs.io/en/stable/tutorial.html#controlling-things-with-tags">behave documentation</a></p>
<p>The option <code>-i &lt;inifile&gt;</code> can be used to pass a file in the <code>behave.ini</code> format into behave. With that, any behave configuration settings can be specified to control how behave behaves. See the behave documentation about the <code>behave.ini</code> configuration file <a href="https://behave.readthedocs.io/en/stable/behave.html#configuration-files">here</a>.</p>
<h3 id="test-coverage">Test Coverage<a class="headerlink" href="#test-coverage" title="Permanent link">&para;</a></h3>
<p>To read about what protocols and features from Aries Interop Profile 1.0, see the <a href="TEST-COVERAGE/">Test Coverage Matrix</a>.</p>
<h3 id="test-reporting">Test Reporting<a class="headerlink" href="#test-reporting" title="Permanent link">&para;</a></h3>
<p>For information on enhanced test reporting with the Aries Agent Test Harness, see <a href="TEST_REPORTING/">Advanced Test Reporting</a>.</p>
<h2 id="adding-runsets">Adding Runsets<a class="headerlink" href="#adding-runsets" title="Permanent link">&para;</a></h2>
<p>Runsets are GHA based workflows that automate the execution of your interop tests and reporting of the results.</p>
<p>These workflows are contained in the .github/workflows folder and must be named <code>test-harness-&lt;name&gt;.yml</code>.  Refer to the existing files for examples on how to create one specific to your use case.  In most cases you will be able to copy an existing file and change a few parameters.</p>
<p>Test execution is controlled by the <a href="https://github.com/hyperledger/aries-agent-test-harness/blob/main/.github/workflows/test-runner.yml"><code>test-harness-runner</code></a>.  This workflow will dynamically pick up and run any workflow conforming to the <code>test-harness-*.yml</code> naming convention.  Specific test harnesses can be excluded by adding their file name pattern to the <code>ignore_files_starts_with</code> list separated by a <code>,</code>.  The test harnesses are run by the <strong>Run Test Harness</strong> job which uses a throttled matrix strategy.  The number of concurrent test harness runs can be controlled by setting the <code>max-parallel</code> parameter to an appropriate number.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../aries-vcx/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Aries VCX">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Aries VCX
              </div>
            </div>
          </a>
        
        
          
          <a href="TEST_DEV_GUIDE/" class="md-footer__link md-footer__link--next" aria-label="Next: Test Development Guidelines">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Test Development Guidelines
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>